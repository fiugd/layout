<!doctype html>
<html lang="en">
	<head>
		<title>Layout Test</title>
		<meta charset="utf-8">
		<meta name="description" content="">
		<meta name="author" content="">
		<meta name="viewport" content="width=device-width, initial-scale=1">
		<meta name="mobile-web-app-capable" content="yes">
		<meta name="color-scheme" content="dark">
		<link rel="shortcut icon" href="data:image/x-icon;," type="image/x-icon"> 
		<link rel="stylesheet" href="index.css" >
	</head>

	<body></body>

	<script type="module">
		//import Layout from "https://unpkg.com/@fiug/layout@0.0.0-6";
		import Layout from "../src/index.js";

		function debounce(func, timeout = 500){
			let timer;
			return (...args) => {
				clearTimeout(timer);
				timer = setTimeout(() => { func.apply(this, args); }, timeout);
			};
		}
		
		const storedLayout = (() => {
			try {
				const s = sessionStorage.getItem('test-layout-example');
				if(!s) return;
				return JSON.parse(s);
			} catch(e){
				console.log(e);
			}
		})();

		const layoutConfig = storedLayout || {
			rows: [
				{
					columns: [
						{
							iframe: "action.html",
							width: "45px",
							resize: false,
							drop: false
						}, {
							iframe: "tree.html",
							width: "220px",
							minWidth: "200px",
							snapWidth: "150px",
							drop: false
						}, {
							columns: [
								{
									width: "55%",
									tabs: [
										{ iframe: "six.html" },
										{ iframe: "one.json", active: true }
									]
								},
								{ iframe: "terminal.html" }
							]
						}
					]
				},
				{
					iframe: 'status.html', height: "22px", resize: false, drop: false
				}
			]
		};

		const layoutChange = debounce((config) => {
			const configString = JSON.stringify(config, null, 2);
			//console.log(configString);
			sessionStorage.setItem('test-layout-example', configString);
		});

		const configWithParent = { ...layoutConfig, parent: document.body };

		new Layout(configWithParent, layoutChange);
	</script>
</html>

