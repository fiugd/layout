<meta name="color-scheme" content="dark">
<style>
	body {
		height: 100vh; width: 100vw; overflow: hidden; color: white;
		display: flex;
		flex-direction: column;
		margin: 0;
	}
	.tabs { height: 25px; background: #333; display: flex; }
	.tab { padding: 5px 15px; cursor: pointer; }
	.tab + .tab { margin-left: 1px; }
	.editor { flex: 1; }
	iframe { border: 0; width: 100%; height: 100%; }
	.active, .open { background: #1a1a1a; }
</style>

<body>
	<div class="tabs"></div>
	<div class="editor"></div>
</body>

<script type="module">
	import { onDrop } from "https://unpkg.com/@fiug/layout@0.0.0-4";
	//import { onDrop } from '../src/index.js';
	const tabs = document.querySelector('.tabs');
	const editor = document.querySelector('.editor');
	let dragover;

	function upsertTab(data){
		Array.from(tabs.querySelectorAll('.tab.active'))
			.forEach(x=>x.classList.remove('active'));
		const found = tabs.querySelector(`.tab[file="${data}"]`);
		if(found){
			found.classList.add('active');
			return
		}
		tabs.innerHTML += `<div class="tab active" file="${data}">${data}</div>`;
	}
	function openDoc({ name }){
		upsertTab(name);
		editor.innerHTML = `
			<iframe src="./document.html" ondragover="dragover(event)"></iframe>
		`;
		editor.querySelector('iframe').contentWindow.ondragover = dragover;
		editor.classList.add('open');
	}

	({ dragover } = onDrop(openDoc));
	openDoc({ name: 'six.html' });

</script>
